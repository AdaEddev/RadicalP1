p>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.0/dist/hanzi-writer.min.js" type="text/javascript"></script>
</p>

<div id="character-target-div"></div>

<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" id="grid-background-target">
    <line x1="0" y1="0" x2="800" y2="800" stroke="#DDD" />
    <line x1="800" y1="0" x2="0" y2="800" stroke="#DDD" />
    <line x1="400" y1="0" x2="400" y2="800" stroke="#DDD" />
    <line x1="0" y1="400" x2="800" y2="400" stroke="#DDD" />
  </svg>

<button id="animate-button">Animate</button>



<script type="text/javascript">

var date_init;
var date_start;
var date_end;

//web page size controller
var varWidth= 800; //character width
var varHeight= 800; //character height
var varPadding= 0; //distance from top
var varShowOutline = true;


//font style controller
var varStrokeColor= '#000000'; //stroke color
var varRadicalColor= '#000000'; // Radical Color

//content
var i=0; //system initial position, do NOT change
const characters = ["大","小","心","土"];

//animation controller
var varAnimationSpeed=0.1; // x times normal speed
var varDelayBetweenStrokes=500; //milliseconds
var varDelayBetweenAnimations=1000; //milliseconds

//var writer = HanziWriter.create('character-target-div', characters[i]
var writer = HanziWriter.create('grid-background-target', characters[i], {
        width: varWidth,
        height: varHeight,
        padding: varPadding,
        showOutline: varShowOutline,
        strokeAnimationSpeed: varAnimationSpeed, // 5x normal speed
        delayBetweenStrokes: varDelayBetweenStrokes, // milliseconds
        radicalColor: varRadicalColor, // blue
        strokeColor: varStrokeColor
    });



function AnimateCharacters(){
    target=characters[i];
    let diff = Date.now() - date_init;
    let sec_start = Math.floor(diff/1000);

    writer.setCharacter(target);

    setTimeout(function(){
        writer.animateCharacter({
        onComplete:function(){
            let diff = Date.now() - date_init;
            let sec_end = Math.floor(diff/1000);
            console.log(target +","+sec_start+","+sec_end);
            i++;
            setTimeout(function(){
                if(i<characters.length){
                    AnimateCharacters();
                }
            },
            varDelayBetweenAnimations);

            
            }
            
        })
    },varDelayBetweenAnimations);
    
    }



document.getElementById('animate-button').addEventListener('click', function(){
    console.log("the character, start second, end second");
    date_init = Date.now();
    AnimateCharacters();
});


</script>
